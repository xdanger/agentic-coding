# 编码标准

本文档定义了项目的编码标准和最佳实践，所有代码贡献者（包括AI和人类）必须遵循这些规范。

## 1. 通用编码原则

### 1.1 DRY原则（Don't Repeat Yourself）

- 避免代码中的重复，将常见功能抽象为可重用组件
- 宁可编写更多的抽象而不是重复相似的代码
- 将重复逻辑提取到单独的函数或类中

### 1.2 SOLID原则

- **单一职责原则**：每个类只应该有一个变更理由
- **开放/封闭原则**：实体应该对扩展开放，对修改封闭
- **里氏替换原则**：子类应该可以替换其基类而不影响程序行为
- **接口隔离原则**：客户端不应该依赖它不使用的接口
- **依赖倒置原则**：高层模块不应依赖低层模块，两者都应依赖抽象

### 1.3 代码可读性

- 选择清晰、有意义的命名，避免缩写和晦涩的名称
- 编写自文档化的代码，减少不必要的注释
- 使用一致的格式和缩进风格
- 保持函数和方法简短，每个函数只做一件事情

## 2. 语言特定规范

（根据项目使用的编程语言添加具体规范）

## 3. 错误处理与日志

### 3.1 错误处理

- 明确定义和使用错误类型
- 在适当的级别处理错误，避免吞没异常
- 提供有意义的错误消息，包含足够的上下文信息
- 避免使用错误代码作为正常控制流

### 3.2 日志记录

- 使用结构化日志记录
- 在关键点记录适当的日志级别（DEBUG, INFO, WARNING, ERROR, CRITICAL）
- 记录有助于诊断问题的上下文信息
- 避免记录敏感信息（密码、API密钥等）

## 4. 性能考虑

- 在开发阶段就考虑算法效率
- 避免不必要的计算和内存分配
- 识别并优化热点路径
- 使用适当的数据结构和算法
- 考虑并发和异步处理的可能性

## 5. 安全指南

- 验证所有用户输入
- 使用参数化查询防止SQL注入
- 实现适当的访问控制
- 避免在代码中硬编码敏感信息
- 使用最新的安全库和框架
- 定期更新依赖项以解决安全漏洞

## 6. 代码组织

- 遵循项目的目录结构
- 将相关功能组织在一起
- 使用适当的模块化和封装
- 保持适当的代码分离，遵循关注点分离原则

## 7. 代码审查清单

代码贡献提交前必须符合以下要求：

- [ ] 代码遵循本文档中的所有编码标准
- [ ] 所有测试都通过
- [ ] 代码已格式化符合项目风格
- [ ] 没有不必要的注释或调试代码
- [ ] 没有未使用的导入、变量或函数
- [ ] 错误处理适当且全面
- [ ] 日志记录清晰且有用
- [ ] 代码逻辑简单明了
- [ ] 性能和内存使用已考虑
- [ ] 安全最佳实践已应用

## 8. 提交信息规范

所有提交信息必须遵循 [Conventional Commits](https://www.conventionalcommits.org/) 规范，并使用 [GitMoji](https://gitmoji.dev/) 添加表情符号，格式如下：

```plaintext
<类型>[可选作用域]: <描述>

[可选正文]

[可选页脚]
```

类型必须是以下之一：

- feat: 新功能
- fix: 错误修复
- docs: 文档更改
- style: 不影响代码含义的格式更改
- refactor: 既不修复错误也不添加功能的代码更改
- perf: 提高性能的代码更改
- test: 添加或修正测试
- build: 影响构建系统或外部依赖的更改
- ci: 更改CI配置文件和脚本
- chore: 不修改src或test文件的其他更改
